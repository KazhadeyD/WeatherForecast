(()=>{"use strict";const t="c1d953812265ca6dc359df36112a41c6";async function n(n){const e=`https://api.openweathermap.org/data/2.5/weather?q=${n}&lang=en&units=metric&appid=${t}`,i=await fetch(e);return await i.json()}const e="cityHistory";function i(){const t=localStorage.getItem(e);return null===t?(console.log("No city found"),null):t.split(",")}function o(t,n){document.querySelector("#map").src=`https://static-maps.yandex.ru/1.x/?ll=${n},${t}&z=10&l=map&pt=${n},${t},flag`}function a(){const t=i();if(null===t.length)return;const e=document.querySelector("#city-history");e.innerHTML="",t.forEach(((t,i)=>{const a=document.createElement("li");a.innerText=t,a.addEventListener("click",(async()=>{const e=await n(t);document.querySelector("#weather-info-in-city").innerHTML=`<li>Введенный город: ${t}</li>\n                                  <li>Температура: ${e.main.temp} C°</li>`,o(e.coord.lat,e.coord.lon)})),e.appendChild(a)}))}document.getElementById("btnGetWeather").addEventListener("click",(async()=>{const t=document.getElementById("inputCity").value;if(null===t)return;const c=await n(t);document.querySelector("#weather-info-in-city").innerHTML=`<li>Введенный город: ${t}</li>\n                                <li>Температура: ${c.main.temp} C°</li>`,o(c.coord.lat,c.coord.lon),function(t){if(null===t)return;const n=i()??[];n.length>9&&n.shift(),n.push(t),localStorage.setItem(e,n.join(","))}(t),a()})),async function(){const n=await async function(){const t=await fetch("https://get.geojs.io/v1/ip/geo.json"),n=await t.json(),e={};return e.longitude=n.longitude,e.latitude=n.latitude,e}(),e=await async function(n,e){const i=`https://api.openweathermap.org/data/2.5/weather?lat=${n}&lon=${e}&lang=en&units=metric&appid=${t}`,o=await fetch(i);return await o.json()}(n.latitude,n.longitude);document.querySelector("#weather-info").innerHTML=`<li>Ваш город: ${e.name}</li>\n                               <li>Температура: ${e.main.temp} C°</li>\n                               <li><i>Место под иконку</i></li>`,o(n.latitude,n.longitude)}(),a()})();
//# sourceMappingURL=main.bundle.js.map